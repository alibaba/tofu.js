<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>tofu.js API Documentation</title>
    
    <meta name="description" content="Documentation for tofu.js library" />
    
        <meta name="keywords" content="docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc" />
        <meta name="keyword" content="docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"tofu.js","footer":"Made with ♥ by fish-ball","copyright":"tofu.js Copyright © 2016-2018 fish-ball.","disqus":"","googleAnalytics":"UA-103772589-5","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"tofu.js API Documentation","description":"Documentation for tofu.js library","keyword":"docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc"},"linenums":true};
    </script>
    

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', config.googleAnalytics]);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">tofu.js</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Tween">
            <span class="title namespace">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="Tween.html">Tween</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Utils">
            <span class="title namespace">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="Utils.html">Utils</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Utils.clamp"><a href="Utils.html#.clamp">clamp</a></li>
            
                <li class="parent" data-name="Utils.codomainBounce"><a href="Utils.html#.codomainBounce">codomainBounce</a></li>
            
                <li class="parent" data-name="Utils.copyJSON"><a href="Utils.html#.copyJSON">copyJSON</a></li>
            
                <li class="parent" data-name="Utils.DTR"><a href="Utils.html#.DTR">DTR</a></li>
            
                <li class="parent" data-name="Utils.euclideanModulo"><a href="Utils.html#.euclideanModulo">euclideanModulo</a></li>
            
                <li class="parent" data-name="Utils.isArray"><a href="Utils.html#.isArray">isArray</a></li>
            
                <li class="parent" data-name="Utils.isBoolean"><a href="Utils.html#.isBoolean">isBoolean</a></li>
            
                <li class="parent" data-name="Utils.isFunction"><a href="Utils.html#.isFunction">isFunction</a></li>
            
                <li class="parent" data-name="Utils.isNumber"><a href="Utils.html#.isNumber">isNumber</a></li>
            
                <li class="parent" data-name="Utils.isObject"><a href="Utils.html#.isObject">isObject</a></li>
            
                <li class="parent" data-name="Utils.isString"><a href="Utils.html#.isString">isString</a></li>
            
                <li class="parent" data-name="Utils.isUndefined"><a href="Utils.html#.isUndefined">isUndefined</a></li>
            
                <li class="parent" data-name="Utils.linear"><a href="Utils.html#.linear">linear</a></li>
            
                <li class="parent" data-name="Utils.random"><a href="Utils.html#.random">random</a></li>
            
                <li class="parent" data-name="Utils.RTD"><a href="Utils.html#.RTD">RTD</a></li>
            
                <li class="parent" data-name="Utils.smootherstep"><a href="Utils.html#.smootherstep">smootherstep</a></li>
            
                <li class="parent" data-name="Utils.smoothstep"><a href="Utils.html#.smoothstep">smoothstep</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnchorBase">
            <span class="title ">
                
                <a href="AnchorBase.html">AnchorBase</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="AnchorBase#putHere"><a href="AnchorBase.html#putHere">putHere</a></li>
            
                <li class="parent" data-name="AnchorBase#putWhere"><a href="AnchorBase.html#putWhere">putWhere</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnchorRippling">
            <span class="title ">
                
                <a href="AnchorRippling.html">AnchorRippling</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="AnchorRippling#map"><a href="AnchorRippling.html#map">map</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ARGlue">
            <span class="title ">
                
                <a href="ARGlue.html">ARGlue</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="ARGlue#autoHide"><a href="ARGlue.html#autoHide">autoHide</a></li>
            
                <li class="parent" data-name="ARGlue#matrixAutoUpdate"><a href="ARGlue.html#matrixAutoUpdate">matrixAutoUpdate</a></li>
            
                <li class="parent" data-name="ARGlue#name"><a href="ARGlue.html#name">name</a></li>
            
                <li class="parent" data-name="ARGlue#type"><a href="ARGlue.html#type">type</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="ARGlue#updatePose"><a href="ARGlue.html#updatePose">updatePose</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ARViewer">
            <span class="title ">
                
                <a href="ARViewer.html">ARViewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="ARViewer#ar_map"><a href="ARViewer.html#ar_map">ar_map</a></li>
            
                <li class="" data-name="ARViewer#autoClear"><a href="ARViewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="ARViewer#camera"><a href="ARViewer.html#camera">camera</a></li>
            
                <li class="" data-name="ARViewer#compositor"><a href="ARViewer.html#compositor">compositor</a></li>
            
                <li class="" data-name="ARViewer#fps"><a href="ARViewer.html#fps">fps</a></li>
            
                <li class="parent" data-name="ARViewer#frameHeight"><a href="ARViewer.html#frameHeight">frameHeight</a></li>
            
                <li class="parent" data-name="ARViewer#frameWidth"><a href="ARViewer.html#frameWidth">frameWidth</a></li>
            
                <li class="" data-name="ARViewer#graphicsLayer"><a href="ARViewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="" data-name="ARViewer#primerLayer"><a href="ARViewer.html#primerLayer">primerLayer</a></li>
            
                <li class="" data-name="ARViewer#renderer"><a href="ARViewer.html#renderer">renderer</a></li>
            
                <li class="" data-name="ARViewer#ticking"><a href="ARViewer.html#ticking">ticking</a></li>
            
                <li class="" data-name="ARViewer#timeScale"><a href="ARViewer.html#timeScale">timeScale</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="ARViewer#add"><a href="ARViewer.html#add">add</a></li>
            
                <li class="" data-name="ARViewer#addPrimer"><a href="ARViewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="ARViewer#remove"><a href="ARViewer.html#remove">remove</a></li>
            
                <li class="" data-name="ARViewer#removePrimer"><a href="ARViewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="ARViewer#render"><a href="ARViewer.html#render">render</a></li>
            
                <li class="" data-name="ARViewer#renderLayer"><a href="ARViewer.html#renderLayer">renderLayer</a></li>
            
                <li class="" data-name="ARViewer#start"><a href="ARViewer.html#start">start</a></li>
            
                <li class="" data-name="ARViewer#stop"><a href="ARViewer.html#stop">stop</a></li>
            
                <li class="" data-name="ARViewer#update"><a href="ARViewer.html#update">update</a></li>
            
                <li class="parent" data-name="ARViewer#updateCameraMatrix"><a href="ARViewer.html#updateCameraMatrix">updateCameraMatrix</a></li>
            
                <li class="parent" data-name="ARViewer#updatePoses"><a href="ARViewer.html#updatePoses">updatePoses</a></li>
            
                <li class="parent" data-name="ARViewer#updateViewport"><a href="ARViewer.html#updateViewport">updateViewport</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="BezierEasing">
            <span class="title ">
                
                <a href="BezierEasing.html">BezierEasing</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="BezierEasing#get"><a href="BezierEasing.html#get">get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CameraPrimer">
            <span class="title ">
                
                <a href="CameraPrimer.html">CameraPrimer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="CameraPrimer#color"><a href="CameraPrimer.html#color">color</a></li>
            
                <li class="parent" data-name="CameraPrimer#displayTarget"><a href="CameraPrimer.html#displayTarget">displayTarget</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="CameraPrimer#getFrames"><a href="CameraPrimer.html#getFrames">getFrames</a></li>
            
                <li class="parent" data-name="CameraPrimer#render"><a href="CameraPrimer.html#render">render</a></li>
            
                <li class="parent" data-name="CameraPrimer#update"><a href="CameraPrimer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Compositor">
            <span class="title ">
                
                <a href="Compositor.html">Compositor</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Compositor#aeDelta"><a href="Compositor.html#aeDelta">aeDelta</a></li>
            
                <li class="parent" data-name="Compositor#afterEffects"><a href="Compositor.html#afterEffects">afterEffects</a></li>
            
                <li class="parent" data-name="Compositor#autoClear"><a href="Compositor.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Compositor#isAeOpen"><a href="Compositor.html#isAeOpen">isAeOpen</a></li>
            
                <li class="parent" data-name="Compositor#layers"><a href="Compositor.html#layers">layers</a></li>
            
                <li class="parent" data-name="Compositor#needSort"><a href="Compositor.html#needSort">needSort</a></li>
            
                <li class="parent" data-name="Compositor#renderer"><a href="Compositor.html#renderer">renderer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Compositor#add"><a href="Compositor.html#add">add</a></li>
            
                <li class="parent" data-name="Compositor#addPass"><a href="Compositor.html#addPass">addPass</a></li>
            
                <li class="parent" data-name="Compositor#clear"><a href="Compositor.html#clear">clear</a></li>
            
                <li class="parent" data-name="Compositor#insertPass"><a href="Compositor.html#insertPass">insertPass</a></li>
            
                <li class="parent" data-name="Compositor#remove"><a href="Compositor.html#remove">remove</a></li>
            
                <li class="parent" data-name="Compositor#render"><a href="Compositor.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CylinderWorld">
            <span class="title ">
                
                <a href="CylinderWorld.html">CylinderWorld</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="CylinderWorld#draggable"><a href="CylinderWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="CylinderWorld#draggable"><a href="CylinderWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragX"><a href="CylinderWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragX"><a href="CylinderWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragY"><a href="CylinderWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragY"><a href="CylinderWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftX"><a href="CylinderWorld.html#driftX">driftX</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftX"><a href="CylinderWorld.html#driftX">driftX</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftY"><a href="CylinderWorld.html#driftY">driftY</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftY"><a href="CylinderWorld.html#driftY">driftY</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GltfMagic">
            <span class="title ">
                
                <a href="GltfMagic.html">GltfMagic</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GraphicsLayer">
            <span class="title ">
                
                <a href="GraphicsLayer.html">GraphicsLayer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="GraphicsLayer#graphics"><a href="GraphicsLayer.html#graphics">graphics</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="GraphicsLayer#add"><a href="GraphicsLayer.html#add">add</a></li>
            
                <li class="parent" data-name="GraphicsLayer#remove"><a href="GraphicsLayer.html#remove">remove</a></li>
            
                <li class="parent" data-name="GraphicsLayer#render"><a href="GraphicsLayer.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Layer">
            <span class="title ">
                
                <a href="Layer.html">Layer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Layer#aeDelta"><a href="Layer.html#aeDelta">aeDelta</a></li>
            
                <li class="parent" data-name="Layer#afterEffects"><a href="Layer.html#afterEffects">afterEffects</a></li>
            
                <li class="parent" data-name="Layer#autoClear"><a href="Layer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Layer#camera"><a href="Layer.html#camera">camera</a></li>
            
                <li class="parent" data-name="Layer#isAeOpen"><a href="Layer.html#isAeOpen">isAeOpen</a></li>
            
                <li class="parent" data-name="Layer#isLayer"><a href="Layer.html#isLayer">isLayer</a></li>
            
                <li class="parent" data-name="Layer#parent"><a href="Layer.html#parent">parent</a></li>
            
                <li class="parent" data-name="Layer#quad"><a href="Layer.html#quad">quad</a></li>
            
                <li class="parent" data-name="Layer#renderer"><a href="Layer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="Layer#renderToScreen"><a href="Layer.html#renderToScreen">renderToScreen</a></li>
            
                <li class="parent" data-name="Layer#scene"><a href="Layer.html#scene">scene</a></li>
            
                <li class="parent" data-name="Layer#zIndex"><a href="Layer.html#zIndex">zIndex</a></li>
            
                <li class="parent" data-name="Layer#zIndex"><a href="Layer.html#zIndex">zIndex</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Layer#addPass"><a href="Layer.html#addPass">addPass</a></li>
            
                <li class="parent" data-name="Layer#clear"><a href="Layer.html#clear">clear</a></li>
            
                <li class="parent" data-name="Layer#insertPass"><a href="Layer.html#insertPass">insertPass</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Primer">
            <span class="title ">
                
                <a href="Primer.html">Primer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#enabled"><a href="Primer.html#enabled">enabled</a></li>
            
                <li class="parent" data-name="Primer#isPrimer"><a href="Primer.html#isPrimer">isPrimer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Primer#_correctUv"><a href="Primer.html#_correctUv">_correctUv</a></li>
            
                <li class="parent" data-name="Primer#_setPositions"><a href="Primer.html#_setPositions">_setPositions</a></li>
            
                <li class="parent" data-name="Primer#render"><a href="Primer.html#render">render</a></li>
            
                <li class="parent" data-name="Primer#setTargetAspect"><a href="Primer.html#setTargetAspect">setTargetAspect</a></li>
            
                <li class="parent" data-name="Primer#updateTimeline"><a href="Primer.html#updateTimeline">updateTimeline</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="PrimerLayer">
            <span class="title ">
                
                <a href="PrimerLayer.html">PrimerLayer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="PrimerLayer#isEmpty"><a href="PrimerLayer.html#isEmpty">isEmpty</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="PrimerLayer#add"><a href="PrimerLayer.html#add">add</a></li>
            
                <li class="parent" data-name="PrimerLayer#remove"><a href="PrimerLayer.html#remove">remove</a></li>
            
                <li class="parent" data-name="PrimerLayer#render"><a href="PrimerLayer.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SphereWorld">
            <span class="title ">
                
                <a href="SphereWorld.html">SphereWorld</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="SphereWorld#draggable"><a href="SphereWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="SphereWorld#draggable"><a href="SphereWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="SphereWorld#dragX"><a href="SphereWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="SphereWorld#dragX"><a href="SphereWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="SphereWorld#dragY"><a href="SphereWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="SphereWorld#dragY"><a href="SphereWorld.html#dragY">dragY</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="SphereWorld#add"><a href="SphereWorld.html#add">add</a></li>
            
                <li class="parent" data-name="SphereWorld#remove"><a href="SphereWorld.html#remove">remove</a></li>
            
                <li class="parent" data-name="SphereWorld#setCamera"><a href="SphereWorld.html#setCamera">setCamera</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="TexturePrimer">
            <span class="title ">
                
                <a href="TexturePrimer.html">TexturePrimer</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="TexturePrimer#_gainFrameSize"><a href="TexturePrimer.html#_gainFrameSize">_gainFrameSize</a></li>
            
                <li class="parent" data-name="TexturePrimer#render"><a href="TexturePrimer.html#render">render</a></li>
            
                <li class="parent" data-name="TexturePrimer#update"><a href="TexturePrimer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title ">
                
                <a href="Viewer.html">Viewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Viewer#autoClear"><a href="Viewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Viewer#camera"><a href="Viewer.html#camera">camera</a></li>
            
                <li class="parent" data-name="Viewer#compositor"><a href="Viewer.html#compositor">compositor</a></li>
            
                <li class="parent" data-name="Viewer#fps"><a href="Viewer.html#fps">fps</a></li>
            
                <li class="parent" data-name="Viewer#graphicsLayer"><a href="Viewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="parent" data-name="Viewer#primerLayer"><a href="Viewer.html#primerLayer">primerLayer</a></li>
            
                <li class="parent" data-name="Viewer#renderer"><a href="Viewer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="Viewer#ticking"><a href="Viewer.html#ticking">ticking</a></li>
            
                <li class="parent" data-name="Viewer#timeScale"><a href="Viewer.html#timeScale">timeScale</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Viewer#addPrimer"><a href="Viewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="Viewer#removePrimer"><a href="Viewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="Viewer#render"><a href="Viewer.html#render">render</a></li>
            
                <li class="parent" data-name="Viewer#renderLayer"><a href="Viewer.html#renderLayer">renderLayer</a></li>
            
                <li class="parent" data-name="Viewer#start"><a href="Viewer.html#start">start</a></li>
            
                <li class="parent" data-name="Viewer#stop"><a href="Viewer.html#stop">stop</a></li>
            
                <li class="parent" data-name="Viewer#update"><a href="Viewer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="XRViewer">
            <span class="title ">
                
                <a href="XRViewer.html">XRViewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="" data-name="XRViewer#autoClear"><a href="XRViewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="XRViewer#background"><a href="XRViewer.html#background">background</a></li>
            
                <li class="parent" data-name="XRViewer#background"><a href="XRViewer.html#background">background</a></li>
            
                <li class="parent" data-name="XRViewer#camera"><a href="XRViewer.html#camera">camera</a></li>
            
                <li class="" data-name="XRViewer#compositor"><a href="XRViewer.html#compositor">compositor</a></li>
            
                <li class="" data-name="XRViewer#fps"><a href="XRViewer.html#fps">fps</a></li>
            
                <li class="" data-name="XRViewer#graphicsLayer"><a href="XRViewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="parent" data-name="XRViewer#interactionManager"><a href="XRViewer.html#interactionManager">interactionManager</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="" data-name="XRViewer#primerLayer"><a href="XRViewer.html#primerLayer">primerLayer</a></li>
            
                <li class="" data-name="XRViewer#renderer"><a href="XRViewer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="XRViewer#sensorCTL"><a href="XRViewer.html#sensorCTL">sensorCTL</a></li>
            
                <li class="parent" data-name="XRViewer#stereo"><a href="XRViewer.html#stereo">stereo</a></li>
            
                <li class="" data-name="XRViewer#ticking"><a href="XRViewer.html#ticking">ticking</a></li>
            
                <li class="" data-name="XRViewer#timeScale"><a href="XRViewer.html#timeScale">timeScale</a></li>
            
                <li class="parent" data-name="XRViewer#vrmode"><a href="XRViewer.html#vrmode">vrmode</a></li>
            
                <li class="parent" data-name="XRViewer#vrsensor"><a href="XRViewer.html#vrsensor">vrsensor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="XRViewer#add"><a href="XRViewer.html#add">add</a></li>
            
                <li class="" data-name="XRViewer#addPrimer"><a href="XRViewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="XRViewer#remove"><a href="XRViewer.html#remove">remove</a></li>
            
                <li class="" data-name="XRViewer#removePrimer"><a href="XRViewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="XRViewer#render"><a href="XRViewer.html#render">render</a></li>
            
                <li class="" data-name="XRViewer#renderLayer"><a href="XRViewer.html#renderLayer">renderLayer</a></li>
            
                <li class="parent" data-name="XRViewer#setSV"><a href="XRViewer.html#setSV">setSV</a></li>
            
                <li class="" data-name="XRViewer#start"><a href="XRViewer.html#start">start</a></li>
            
                <li class="" data-name="XRViewer#stop"><a href="XRViewer.html#stop">stop</a></li>
            
                <li class="" data-name="XRViewer#update"><a href="XRViewer.html#update">update</a></li>
            
                <li class="parent" data-name="XRViewer#updateStereo"><a href="XRViewer.html#updateStereo">updateStereo</a></li>
            
                <li class="parent" data-name="XRViewer#xrrender"><a href="XRViewer.html#xrrender">xrrender</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="extras_panorama_SphereWorld.js.html">Source: extras/panorama/SphereWorld.js</h1>
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>extras/panorama/SphereWorld.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source linenums"><code>import { Camera, Object3D, Group, TextureLoader, Mesh, SphereBufferGeometry, MeshBasicMaterial, DoubleSide, Vector2, Vector3 } from 'three';
import Utils from '../../utils/Utils';

const RATIO = 0.15;
const RANGE = 60;
const PI2 = Math.PI * 2;
const START = new Vector2();
const END = new Vector2();
const UP = new Vector3(0, 1, 0);

/**
 * 球面全景图组件，快速实现可交互的全景图
 */
class SphereWorld extends Object3D {
  /**
   * 构造函数
   * @param {Object} options 配置
   * @param {String} options.url 球面全景图的链接地址
   * @param {Boolean} [options.flipX=true] 球面全景图纹理是否做水平翻转
   * @param {Boolean} [options.flipY=false] 球面全景图纹理是否做垂直翻转
   * @param {Boolean} [options.draggable=true] 球面全景图是否可拖拽
   * @param {Number} [options.rangeMin=-60] Y轴拖拽的范围限制下限
   * @param {Number} [options.rangeMax=60] Y轴拖拽的范围限制上限
   * @param {Number} [options.driftX=0] 相对于摄像机的X轴旋转的修正角度
   * @param {Number} [options.driftY=0] 相对于摄像机的Y轴旋转的修正角度
   * @param {Number} [options.rotateSpeed=1] 球面全景图的旋转灵敏度
   * @param {Number} [options.radius=1000] 球面全景图的球体半径
   * @param {Number} [options.segmentationX=32] 球面全景图的球面横轴细分
   * @param {Number} [options.segmentationY=32] 球面全景图的球面纵轴细分
   */
  constructor({ url, radius, segmentationX, segmentationY, flipX, flipY, draggable, rotateSpeed, rangeMin, rangeMax, driftX, driftY }) {
    super();

    this.needCamera = true;

    this.needMount = true;

    this.inner = new Group();
    this.camera = null;

    radius = radius || 1000;
    segmentationX = segmentationX || 32;
    segmentationY = segmentationY || 32;
    driftX = Utils.isNumber(driftX) ? driftX : 0;
    driftY = Utils.isNumber(driftY) ? driftY : 0;

    this.background = new Mesh(
      new SphereBufferGeometry(radius, segmentationX, segmentationY),
      new MeshBasicMaterial({ map: new TextureLoader().load(url), side: DoubleSide })
    );

    flipX = Utils.isBoolean(flipX) ? flipX : true;
    flipY = Utils.isBoolean(flipY) ? flipY : false;
    if (flipX) {
      this.background.scale.x = -1;
    }
    if (flipY) {
      this.background.scale.y = -1;
    }

    this.inner.add(this.background);
    super.add.call(this, this.inner);

    this._onStart = this._onStart.bind(this);
    this._onMove = this._onMove.bind(this);
    this._onEnd = this._onEnd.bind(this);
    this._draggable = false;
    this._dragX = 0;
    this.updateTracking = this.updateTracking.bind(this);
    this.rotateSpeed = rotateSpeed || 1;
    this.cx = 0;
    this.cy = 0;
    this.rangeMin = rangeMin || Utils.DTR(-RANGE);
    this.rangeMax = rangeMax || Utils.DTR(RANGE);
    this.eared = false;
    this.draggable = Utils.isBoolean(draggable) ? draggable : true;
    this.updateDrag({
      dragY: driftX,
      dragX: driftY,
    });
  }

  /**
   * set camera
   * @param {PerspectiveCamera} camera scene camera, panorama need get camera pose state
   */
  setCamera(camera) {
    if (camera instanceof Camera) {
      this.camera = camera;
    }
  }

  onDragChange() {
    if (this.draggable) {
      this.on('pretimeline', this.updateTracking);
      this.addEvents();
    } else {
      this.off('pretimeline', this.updateTracking);
      this.removeEvents();
    }
  }

  addEvents() {
    if (this.eared) return;
    this.on('touchstart', this._onStart);
    this.on('touchmove', this._onMove);
    this.on('touchend', this._onEnd);
    this.on('mousedown', this._onStart);
    this.on('mousemove', this._onMove);
    this.on('mouseup', this._onEnd);
    this.eared = true;
  }

  removeEvents() {
    this.off('touchstart', this._onStart);
    this.off('touchmove', this._onMove);
    this.off('touchend', this._onEnd);
    this.off('mousedown', this._onStart);
    this.off('mousemove', this._onMove);
    this.off('mouseup', this._onEnd);
    this.eared = false;
  }

  _onStart(ev) {
    const originalEvent = ev.data.originalEvent;
    if (originalEvent.touches &amp;&amp; originalEvent.touches.length > 1) return;
    this.hadStart = true;
    if (originalEvent.touches) {
      START.x = originalEvent.touches[0].pageX;
      START.y = originalEvent.touches[0].pageY;
    } else {
      START.x = originalEvent.pageX;
      START.y = originalEvent.pageY;
    }
    this.cx = this.dragX;
    this.cy = this.inner.rotation.y;
  }
  _onMove(ev) {
    const originalEvent = ev.data.originalEvent;
    if (!this.hadStart || (originalEvent.touches &amp;&amp; originalEvent.touches.length > 1)) return;
    originalEvent.preventDefault();
    if (originalEvent.touches) {
      END.x = originalEvent.touches[0].pageX;
      END.y = originalEvent.touches[0].pageY;
    } else {
      END.x = originalEvent.pageX;
      END.y = originalEvent.pageY;
    }
    END.sub(START);

    const x = END.y * RATIO * this.rotateSpeed;
    const y = END.x * RATIO * this.rotateSpeed;

    const dragX = this.cx + Utils.DTR(x);
    const dragY = this.cy - Utils.DTR(y);
    this.updateDrag({
      dragX,
      dragY,
    });
  }
  _onEnd() {
    this.hadStart = false;
    this.cx = this.dragX;
    this.cy = this.dragY;
  }

  updateDrag({ dragX, dragY }) {
    this.dragX = Utils.isNumber(dragX) ? dragX : this.dragX;
    this.dragY = Utils.isNumber(dragY) ? dragY : this.dragY;
  }

  updateTracking() {
    if (!this.camera) return;
    const vector = new Vector3(0, 0, -1);
    vector.applyQuaternion(this.camera.quaternion);
    this.quaternion.setFromAxisAngle(new Vector3().crossVectors(UP, vector), this.dragX);
  }

  /**
   * 添加绘制对象
   *
   * @param {THREE.Object3D} child 添加的绘制对象
   */
  add() {
    this.inner.add.apply(this.inner, arguments);
  }

  /**
   * 移除绘制对象
   *
   * @param {THREE.Object3D} child 之前添加的绘制对象
   */
  remove() {
    this.inner.remove.apply(this.inner, arguments);
  }

  /**
   * getter whether draggable or not
   */
  get draggable() {
    return this._draggable;
  }

  /**
   * setter whether draggable or not
   * @param {Boolean} value whether or not
   */
  set draggable(value) {
    if (value !== this._draggable) {
      this._draggable = value;
      this.onDragChange();
    }
  }

  /**
   * getter dragX of this panorama
   */
  get dragX() {
    return this._dragX;
  }

  /**
   * setter dragX of this panorama
   * @param {Number} radian rotation radian
   */
  set dragX(radian) {
    radian = Utils.clamp(radian, this.rangeMin, this.rangeMax);
    if (radian !== this._dragX) {
      this._dragX = radian;
    }
  }

  /**
   * getter dragY of this panorama
   */
  get dragY() {
    return this.inner.rotation.y;
  }

  /**
   * setter dragY of this panorama
   * @param {Number} radian rotation radian
   */
  set dragY(radian) {
    radian = Utils.euclideanModulo(radian, PI2);
    if (radian !== this.inner.rotation.y) {
      this.inner.rotation.y = radian;
    }
  }
}

export default SphereWorld;
</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 08 2018 14:31:57 GMT+0800 (CST)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>

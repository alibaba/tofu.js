<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>tofu.js API Documentation</title>
    
    <meta name="description" content="Documentation for tofu.js library" />
    
        <meta name="keywords" content="docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc" />
        <meta name="keyword" content="docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"tofu.js","footer":"Made with ♥ by fish-ball","copyright":"tofu.js Copyright © 2016-2018 fish-ball.","disqus":"","googleAnalytics":"UA-103772589-5","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"tofu.js API Documentation","description":"Documentation for tofu.js library","keyword":"docs, documentation, pixi, tofu.js, renderer, html5, javascript, jsdoc"},"linenums":true};
    </script>
    

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', config.googleAnalytics]);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">tofu.js</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Tween">
            <span class="title namespace">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="Tween.html">Tween</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Utils">
            <span class="title namespace">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="Utils.html">Utils</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Utils.clamp"><a href="Utils.html#.clamp">clamp</a></li>
            
                <li class="parent" data-name="Utils.codomainBounce"><a href="Utils.html#.codomainBounce">codomainBounce</a></li>
            
                <li class="parent" data-name="Utils.copyJSON"><a href="Utils.html#.copyJSON">copyJSON</a></li>
            
                <li class="parent" data-name="Utils.DTR"><a href="Utils.html#.DTR">DTR</a></li>
            
                <li class="parent" data-name="Utils.euclideanModulo"><a href="Utils.html#.euclideanModulo">euclideanModulo</a></li>
            
                <li class="parent" data-name="Utils.isArray"><a href="Utils.html#.isArray">isArray</a></li>
            
                <li class="parent" data-name="Utils.isBoolean"><a href="Utils.html#.isBoolean">isBoolean</a></li>
            
                <li class="parent" data-name="Utils.isFunction"><a href="Utils.html#.isFunction">isFunction</a></li>
            
                <li class="parent" data-name="Utils.isNumber"><a href="Utils.html#.isNumber">isNumber</a></li>
            
                <li class="parent" data-name="Utils.isObject"><a href="Utils.html#.isObject">isObject</a></li>
            
                <li class="parent" data-name="Utils.isString"><a href="Utils.html#.isString">isString</a></li>
            
                <li class="parent" data-name="Utils.isUndefined"><a href="Utils.html#.isUndefined">isUndefined</a></li>
            
                <li class="parent" data-name="Utils.linear"><a href="Utils.html#.linear">linear</a></li>
            
                <li class="parent" data-name="Utils.random"><a href="Utils.html#.random">random</a></li>
            
                <li class="parent" data-name="Utils.RTD"><a href="Utils.html#.RTD">RTD</a></li>
            
                <li class="parent" data-name="Utils.smootherstep"><a href="Utils.html#.smootherstep">smootherstep</a></li>
            
                <li class="parent" data-name="Utils.smoothstep"><a href="Utils.html#.smoothstep">smoothstep</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnchorBase">
            <span class="title ">
                
                <a href="AnchorBase.html">AnchorBase</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="AnchorBase#putHere"><a href="AnchorBase.html#putHere">putHere</a></li>
            
                <li class="parent" data-name="AnchorBase#putWhere"><a href="AnchorBase.html#putWhere">putWhere</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnchorRippling">
            <span class="title ">
                
                <a href="AnchorRippling.html">AnchorRippling</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="AnchorRippling#map"><a href="AnchorRippling.html#map">map</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ARGlue">
            <span class="title ">
                
                <a href="ARGlue.html">ARGlue</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="ARGlue#autoHide"><a href="ARGlue.html#autoHide">autoHide</a></li>
            
                <li class="parent" data-name="ARGlue#matrixAutoUpdate"><a href="ARGlue.html#matrixAutoUpdate">matrixAutoUpdate</a></li>
            
                <li class="parent" data-name="ARGlue#name"><a href="ARGlue.html#name">name</a></li>
            
                <li class="parent" data-name="ARGlue#type"><a href="ARGlue.html#type">type</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="ARGlue#updatePose"><a href="ARGlue.html#updatePose">updatePose</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ARViewer">
            <span class="title ">
                
                <a href="ARViewer.html">ARViewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="ARViewer#ar_map"><a href="ARViewer.html#ar_map">ar_map</a></li>
            
                <li class="" data-name="ARViewer#autoClear"><a href="ARViewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="ARViewer#camera"><a href="ARViewer.html#camera">camera</a></li>
            
                <li class="" data-name="ARViewer#compositor"><a href="ARViewer.html#compositor">compositor</a></li>
            
                <li class="" data-name="ARViewer#fps"><a href="ARViewer.html#fps">fps</a></li>
            
                <li class="parent" data-name="ARViewer#frameHeight"><a href="ARViewer.html#frameHeight">frameHeight</a></li>
            
                <li class="parent" data-name="ARViewer#frameWidth"><a href="ARViewer.html#frameWidth">frameWidth</a></li>
            
                <li class="" data-name="ARViewer#graphicsLayer"><a href="ARViewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="" data-name="ARViewer#primerLayer"><a href="ARViewer.html#primerLayer">primerLayer</a></li>
            
                <li class="" data-name="ARViewer#renderer"><a href="ARViewer.html#renderer">renderer</a></li>
            
                <li class="" data-name="ARViewer#ticking"><a href="ARViewer.html#ticking">ticking</a></li>
            
                <li class="" data-name="ARViewer#timeScale"><a href="ARViewer.html#timeScale">timeScale</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="ARViewer#add"><a href="ARViewer.html#add">add</a></li>
            
                <li class="" data-name="ARViewer#addPrimer"><a href="ARViewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="ARViewer#remove"><a href="ARViewer.html#remove">remove</a></li>
            
                <li class="" data-name="ARViewer#removePrimer"><a href="ARViewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="ARViewer#render"><a href="ARViewer.html#render">render</a></li>
            
                <li class="" data-name="ARViewer#renderLayer"><a href="ARViewer.html#renderLayer">renderLayer</a></li>
            
                <li class="" data-name="ARViewer#start"><a href="ARViewer.html#start">start</a></li>
            
                <li class="" data-name="ARViewer#stop"><a href="ARViewer.html#stop">stop</a></li>
            
                <li class="" data-name="ARViewer#update"><a href="ARViewer.html#update">update</a></li>
            
                <li class="parent" data-name="ARViewer#updateCameraMatrix"><a href="ARViewer.html#updateCameraMatrix">updateCameraMatrix</a></li>
            
                <li class="parent" data-name="ARViewer#updatePoses"><a href="ARViewer.html#updatePoses">updatePoses</a></li>
            
                <li class="parent" data-name="ARViewer#updateViewport"><a href="ARViewer.html#updateViewport">updateViewport</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="BezierEasing">
            <span class="title ">
                
                <a href="BezierEasing.html">BezierEasing</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="BezierEasing#get"><a href="BezierEasing.html#get">get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CameraPrimer">
            <span class="title ">
                
                <a href="CameraPrimer.html">CameraPrimer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="CameraPrimer#color"><a href="CameraPrimer.html#color">color</a></li>
            
                <li class="parent" data-name="CameraPrimer#displayTarget"><a href="CameraPrimer.html#displayTarget">displayTarget</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="CameraPrimer#getFrames"><a href="CameraPrimer.html#getFrames">getFrames</a></li>
            
                <li class="parent" data-name="CameraPrimer#render"><a href="CameraPrimer.html#render">render</a></li>
            
                <li class="parent" data-name="CameraPrimer#update"><a href="CameraPrimer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Compositor">
            <span class="title ">
                
                <a href="Compositor.html">Compositor</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Compositor#aeDelta"><a href="Compositor.html#aeDelta">aeDelta</a></li>
            
                <li class="parent" data-name="Compositor#afterEffects"><a href="Compositor.html#afterEffects">afterEffects</a></li>
            
                <li class="parent" data-name="Compositor#autoClear"><a href="Compositor.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Compositor#isAeOpen"><a href="Compositor.html#isAeOpen">isAeOpen</a></li>
            
                <li class="parent" data-name="Compositor#layers"><a href="Compositor.html#layers">layers</a></li>
            
                <li class="parent" data-name="Compositor#needSort"><a href="Compositor.html#needSort">needSort</a></li>
            
                <li class="parent" data-name="Compositor#renderer"><a href="Compositor.html#renderer">renderer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Compositor#add"><a href="Compositor.html#add">add</a></li>
            
                <li class="parent" data-name="Compositor#addPass"><a href="Compositor.html#addPass">addPass</a></li>
            
                <li class="parent" data-name="Compositor#clear"><a href="Compositor.html#clear">clear</a></li>
            
                <li class="parent" data-name="Compositor#insertPass"><a href="Compositor.html#insertPass">insertPass</a></li>
            
                <li class="parent" data-name="Compositor#remove"><a href="Compositor.html#remove">remove</a></li>
            
                <li class="parent" data-name="Compositor#render"><a href="Compositor.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CylinderWorld">
            <span class="title ">
                
                <a href="CylinderWorld.html">CylinderWorld</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="CylinderWorld#draggable"><a href="CylinderWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="CylinderWorld#draggable"><a href="CylinderWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragX"><a href="CylinderWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragX"><a href="CylinderWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragY"><a href="CylinderWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="CylinderWorld#dragY"><a href="CylinderWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftX"><a href="CylinderWorld.html#driftX">driftX</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftX"><a href="CylinderWorld.html#driftX">driftX</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftY"><a href="CylinderWorld.html#driftY">driftY</a></li>
            
                <li class="parent" data-name="CylinderWorld#driftY"><a href="CylinderWorld.html#driftY">driftY</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GltfMagic">
            <span class="title ">
                
                <a href="GltfMagic.html">GltfMagic</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GraphicsLayer">
            <span class="title ">
                
                <a href="GraphicsLayer.html">GraphicsLayer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="GraphicsLayer#graphics"><a href="GraphicsLayer.html#graphics">graphics</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="GraphicsLayer#add"><a href="GraphicsLayer.html#add">add</a></li>
            
                <li class="parent" data-name="GraphicsLayer#remove"><a href="GraphicsLayer.html#remove">remove</a></li>
            
                <li class="parent" data-name="GraphicsLayer#render"><a href="GraphicsLayer.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Layer">
            <span class="title ">
                
                <a href="Layer.html">Layer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Layer#aeDelta"><a href="Layer.html#aeDelta">aeDelta</a></li>
            
                <li class="parent" data-name="Layer#afterEffects"><a href="Layer.html#afterEffects">afterEffects</a></li>
            
                <li class="parent" data-name="Layer#autoClear"><a href="Layer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Layer#camera"><a href="Layer.html#camera">camera</a></li>
            
                <li class="parent" data-name="Layer#isAeOpen"><a href="Layer.html#isAeOpen">isAeOpen</a></li>
            
                <li class="parent" data-name="Layer#isLayer"><a href="Layer.html#isLayer">isLayer</a></li>
            
                <li class="parent" data-name="Layer#parent"><a href="Layer.html#parent">parent</a></li>
            
                <li class="parent" data-name="Layer#quad"><a href="Layer.html#quad">quad</a></li>
            
                <li class="parent" data-name="Layer#renderer"><a href="Layer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="Layer#renderToScreen"><a href="Layer.html#renderToScreen">renderToScreen</a></li>
            
                <li class="parent" data-name="Layer#scene"><a href="Layer.html#scene">scene</a></li>
            
                <li class="parent" data-name="Layer#zIndex"><a href="Layer.html#zIndex">zIndex</a></li>
            
                <li class="parent" data-name="Layer#zIndex"><a href="Layer.html#zIndex">zIndex</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Layer#addPass"><a href="Layer.html#addPass">addPass</a></li>
            
                <li class="parent" data-name="Layer#clear"><a href="Layer.html#clear">clear</a></li>
            
                <li class="parent" data-name="Layer#insertPass"><a href="Layer.html#insertPass">insertPass</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Primer">
            <span class="title ">
                
                <a href="Primer.html">Primer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#autoCover"><a href="Primer.html#autoCover">autoCover</a></li>
            
                <li class="parent" data-name="Primer#enabled"><a href="Primer.html#enabled">enabled</a></li>
            
                <li class="parent" data-name="Primer#isPrimer"><a href="Primer.html#isPrimer">isPrimer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Primer#_correctUv"><a href="Primer.html#_correctUv">_correctUv</a></li>
            
                <li class="parent" data-name="Primer#_setPositions"><a href="Primer.html#_setPositions">_setPositions</a></li>
            
                <li class="parent" data-name="Primer#render"><a href="Primer.html#render">render</a></li>
            
                <li class="parent" data-name="Primer#setTargetAspect"><a href="Primer.html#setTargetAspect">setTargetAspect</a></li>
            
                <li class="parent" data-name="Primer#updateTimeline"><a href="Primer.html#updateTimeline">updateTimeline</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="PrimerLayer">
            <span class="title ">
                
                <a href="PrimerLayer.html">PrimerLayer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="PrimerLayer#isEmpty"><a href="PrimerLayer.html#isEmpty">isEmpty</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="PrimerLayer#add"><a href="PrimerLayer.html#add">add</a></li>
            
                <li class="parent" data-name="PrimerLayer#remove"><a href="PrimerLayer.html#remove">remove</a></li>
            
                <li class="parent" data-name="PrimerLayer#render"><a href="PrimerLayer.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SphereWorld">
            <span class="title ">
                
                <a href="SphereWorld.html">SphereWorld</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="SphereWorld#draggable"><a href="SphereWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="SphereWorld#draggable"><a href="SphereWorld.html#draggable">draggable</a></li>
            
                <li class="parent" data-name="SphereWorld#dragX"><a href="SphereWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="SphereWorld#dragX"><a href="SphereWorld.html#dragX">dragX</a></li>
            
                <li class="parent" data-name="SphereWorld#dragY"><a href="SphereWorld.html#dragY">dragY</a></li>
            
                <li class="parent" data-name="SphereWorld#dragY"><a href="SphereWorld.html#dragY">dragY</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="SphereWorld#add"><a href="SphereWorld.html#add">add</a></li>
            
                <li class="parent" data-name="SphereWorld#remove"><a href="SphereWorld.html#remove">remove</a></li>
            
                <li class="parent" data-name="SphereWorld#setCamera"><a href="SphereWorld.html#setCamera">setCamera</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="TexturePrimer">
            <span class="title ">
                
                <a href="TexturePrimer.html">TexturePrimer</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="TexturePrimer#_gainFrameSize"><a href="TexturePrimer.html#_gainFrameSize">_gainFrameSize</a></li>
            
                <li class="parent" data-name="TexturePrimer#render"><a href="TexturePrimer.html#render">render</a></li>
            
                <li class="parent" data-name="TexturePrimer#update"><a href="TexturePrimer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title ">
                
                <a href="Viewer.html">Viewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent" data-name="Viewer#autoClear"><a href="Viewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="Viewer#camera"><a href="Viewer.html#camera">camera</a></li>
            
                <li class="parent" data-name="Viewer#compositor"><a href="Viewer.html#compositor">compositor</a></li>
            
                <li class="parent" data-name="Viewer#fps"><a href="Viewer.html#fps">fps</a></li>
            
                <li class="parent" data-name="Viewer#graphicsLayer"><a href="Viewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="parent" data-name="Viewer#primerLayer"><a href="Viewer.html#primerLayer">primerLayer</a></li>
            
                <li class="parent" data-name="Viewer#renderer"><a href="Viewer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="Viewer#ticking"><a href="Viewer.html#ticking">ticking</a></li>
            
                <li class="parent" data-name="Viewer#timeScale"><a href="Viewer.html#timeScale">timeScale</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="Viewer#addPrimer"><a href="Viewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="Viewer#removePrimer"><a href="Viewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="Viewer#render"><a href="Viewer.html#render">render</a></li>
            
                <li class="parent" data-name="Viewer#renderLayer"><a href="Viewer.html#renderLayer">renderLayer</a></li>
            
                <li class="parent" data-name="Viewer#start"><a href="Viewer.html#start">start</a></li>
            
                <li class="parent" data-name="Viewer#stop"><a href="Viewer.html#stop">stop</a></li>
            
                <li class="parent" data-name="Viewer#update"><a href="Viewer.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="XRViewer">
            <span class="title ">
                
                <a href="XRViewer.html">XRViewer</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="" data-name="XRViewer#autoClear"><a href="XRViewer.html#autoClear">autoClear</a></li>
            
                <li class="parent" data-name="XRViewer#background"><a href="XRViewer.html#background">background</a></li>
            
                <li class="parent" data-name="XRViewer#background"><a href="XRViewer.html#background">background</a></li>
            
                <li class="parent" data-name="XRViewer#camera"><a href="XRViewer.html#camera">camera</a></li>
            
                <li class="" data-name="XRViewer#compositor"><a href="XRViewer.html#compositor">compositor</a></li>
            
                <li class="" data-name="XRViewer#fps"><a href="XRViewer.html#fps">fps</a></li>
            
                <li class="" data-name="XRViewer#graphicsLayer"><a href="XRViewer.html#graphicsLayer">graphicsLayer</a></li>
            
                <li class="parent" data-name="XRViewer#interactionManager"><a href="XRViewer.html#interactionManager">interactionManager</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="parent" data-name="XRViewer#interactive"><a href="XRViewer.html#interactive">interactive</a></li>
            
                <li class="" data-name="XRViewer#primerLayer"><a href="XRViewer.html#primerLayer">primerLayer</a></li>
            
                <li class="" data-name="XRViewer#renderer"><a href="XRViewer.html#renderer">renderer</a></li>
            
                <li class="parent" data-name="XRViewer#sensorCTL"><a href="XRViewer.html#sensorCTL">sensorCTL</a></li>
            
                <li class="parent" data-name="XRViewer#stereo"><a href="XRViewer.html#stereo">stereo</a></li>
            
                <li class="" data-name="XRViewer#ticking"><a href="XRViewer.html#ticking">ticking</a></li>
            
                <li class="" data-name="XRViewer#timeScale"><a href="XRViewer.html#timeScale">timeScale</a></li>
            
                <li class="parent" data-name="XRViewer#vrmode"><a href="XRViewer.html#vrmode">vrmode</a></li>
            
                <li class="parent" data-name="XRViewer#vrsensor"><a href="XRViewer.html#vrsensor">vrsensor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent" data-name="XRViewer#add"><a href="XRViewer.html#add">add</a></li>
            
                <li class="" data-name="XRViewer#addPrimer"><a href="XRViewer.html#addPrimer">addPrimer</a></li>
            
                <li class="parent" data-name="XRViewer#remove"><a href="XRViewer.html#remove">remove</a></li>
            
                <li class="" data-name="XRViewer#removePrimer"><a href="XRViewer.html#removePrimer">removePrimer</a></li>
            
                <li class="parent" data-name="XRViewer#render"><a href="XRViewer.html#render">render</a></li>
            
                <li class="" data-name="XRViewer#renderLayer"><a href="XRViewer.html#renderLayer">renderLayer</a></li>
            
                <li class="parent" data-name="XRViewer#setSV"><a href="XRViewer.html#setSV">setSV</a></li>
            
                <li class="" data-name="XRViewer#start"><a href="XRViewer.html#start">start</a></li>
            
                <li class="" data-name="XRViewer#stop"><a href="XRViewer.html#stop">stop</a></li>
            
                <li class="" data-name="XRViewer#update"><a href="XRViewer.html#update">update</a></li>
            
                <li class="parent" data-name="XRViewer#updateStereo"><a href="XRViewer.html#updateStereo">updateStereo</a></li>
            
                <li class="parent" data-name="XRViewer#xrrender"><a href="XRViewer.html#xrrender">xrrender</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="core_XRViewer.js.html">Source: core/XRViewer.js</h1>
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>core/XRViewer.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source linenums"><code>import { PerspectiveCamera, StereoCamera } from 'three';
import Viewer from './Viewer';
import InteractionManager from 'three.interaction/src/interaction/InteractionManager';
import SphereWorld from '../extras/panorama/SphereWorld';
import CylinderWorld from '../extras/panorama/CylinderWorld';
import Utils from '../utils/Utils';
import Orienter from '../utils/Orienter';

/**
 * `XR-Viewer` a `UC-VR` or `UC-3D` renderer framework
 * @extends Viewer
 * @param {Object} options config for `XR-Viewer` render view-port
 * @param {canvas} options.canvas `canvas-dom` or canvas `css-selector`
 * @param {Number} [options.width=300] init renderer width.
 * @param {Number} [options.height=150] init renderer height.
 * @param {Number} [options.updateStyle=false] auto update css style when setSize.
 * @param {Number} [options.fov=60] Camera frustum vertical field of view.
 * @param {Number} [options.aspect=width/height] Camera frustum aspect ratio.
 * @param {Number} [options.near=0.1] Camera frustum near plane.
 * @param {Number} [options.far=1000] Camera frustum far plane.
 * @param {Number} [options.vrmode=false] whether init with vrmode.
 * @param {Number} [options.stereoAspect=0.5] stereo camera aspect for vrmode.
 * @param {Number} [options.vrsensor=false] whether init with vrsensor.
 * @param {Boolean} [options.interactive=true] whether interactive with scene.
 * @param {Number} [options.fps=60] render frame rate.
 * @param {Boolean} [options.autoClear=true] whether the renderer should automatically clear its output before rendering a frame.
 * @param {Boolean} [options.alpha=false] whether the canvas contains an alpha (transparency) buffer or not.
 * @param {Boolean} [options.antialias=false] whether to perform antialiasing.
 * @param {String} [options.precision='highp'] Shader precision, Can be `highp`, `mediump` or `lowp`.
 * @param {Boolean} [options.premultipliedAlpha=true] whether the renderer will assume that colors have premultiplied alpha.
 * @param {Boolean} [options.stencil=true] whether the drawing buffer has a stencil buffer of at least 8 bits.
 * @param {Boolean} [options.preserveDrawingBuffer=false] whether to preserve the buffers until manually cleared or overwritten.
 * @param {Boolean} [options.depth=true] whether the drawing buffer has a depth buffer of at least 16 bits.
 * @param {Boolean} [options.logarithmicDepthBuffer] whether to use a logarithmic depth buffer.
 */
class XRViewer extends Viewer {
  constructor(options) {
    super(options);

    const { width, height } = this.renderer.getSize();

    const { vrmode, vrsensor, fov = 60, aspect = width / height, near = 0.1, far = 1000 } = options;

    /**
     * view-port camera object, a perspective camera
     *
     * @member {Camera}
     */
    this.camera = new PerspectiveCamera(fov, aspect, near, far);

    /**
     * stereo camera object
     *
     * @member {StereoCamera}
     */
    this.stereo = new StereoCamera();
    this.stereo.aspect = options.stereoAspect || 0.5;

    /**
     * enable vr-mode or not
     *
     * @member {Boolean}
     */
    this.vrmode = vrmode || false;

    /**
     * use orientation sensor or not
     *
     * @member {Boolean}
     */
    this.vrsensor = vrsensor || false;

    /**
     * device orientation sensor, control camera look around
     *
     * @member {Orienter}
     */
    this.sensorCTL = new Orienter();

    // update sensor state before update timeline
    this.sensorCTL.on('deviceorientation', ({ quaternion }) => {
      if (this.vrsensor) {
        this.camera.quaternion.copy(quaternion);
      }
    });

    /**
     * 3d-view interaction manager
     * TODO: should fix interaction bug when vrmode
     */
    this.interactionManager = new InteractionManager(this.renderer, this.graphicsLayer.graphics, this.camera);

    // update interaction in every tick
    const interactionUpdate = ({ snippet }) => {
      this.interactionManager.update(snippet);
    };

    /**
     * whether all 3d-view is interactively or not
     *
     * @member {boolean}
     * @private
     */
    this._interactive = null;

    this.interactiveOnChange = function() {
      if (this.interactive) {
        this.on('pretimeline', interactionUpdate);
        this.interactionManager.addEvents();
      } else {
        this.off('pretimeline', interactionUpdate);
        this.interactionManager.removeEvents();
      }
    };

    /**
     * whether all 3d-view is interactively or not
     *
     * @member {boolean}
     */
    this.interactive = Utils.isBoolean(options.interactive) ?
      options.interactive :
      true;
  }

  /**
   * scene background
   */
  get background() {
    return this._background;
  }

  /**
   * set scene background
   * @param {SphereWorld|CylinderWorld} bg scene background
   */
  set background(bg) {
    if (bg instanceof SphereWorld || bg instanceof CylinderWorld) {
      this._background = bg;

      if (bg.needCamera) {
        bg.setCamera(this.camera);
      }
      if (bg.needMount) {
        this.add(bg);
      }
    } else {
      console.log('unexpected background instance, only support SphereWorld、CylinderWorld');
    }
  }

  /**
   * getter whether scene interactively or not
   */
  get interactive() {
    return this._interactive;
  }

  /**
   * setter whether scene interactively or not
   * @param {Boolean} value is interactively ?
   */
  set interactive(value) {
    if (value !== this.interactive) {
      this._interactive = value;
      this.interactiveOnChange();
    }
  }

  /**
   * render all scene
   */
  render() {
    if (this.autoClear) {
      this.renderer.setRenderTarget(null);
      this.renderer.clear(this.renderer.autoClearColor, this.renderer.autoClearDepth, this.renderer.autoClearStencil);
    }

    this.xrrender();
  }

  /**
   * auto switch render-mode, use vrmode or not
   */
  xrrender() {
    const size = this.renderer.getDrawingBufferSize();
    if (this.vrmode) {
      const hw = size.width / 2;
      this.updateStereo();

      this.renderer.setScissorTest(true);

      this.setSV(0, 0, hw, size.height);
      this.renderLayer(this.stereo.cameraL);

      this.setSV(hw, 0, hw, size.height);
      this.renderLayer(this.stereo.cameraR);

      this.renderer.setScissorTest(false);
    } else {
      this.setSV(0, 0, size.width, size.height);

      this.renderLayer(this.camera);
    }
  }

  /**
   * update stereo camera
   */
  updateStereo() {
    if (this.camera.parent === null) this.camera.updateMatrixWorld();
    this.stereo.update(this.camera);
  }

  /**
   * set render rectangle area
   * @param {*} x rectangle left-top point x-position
   * @param {*} y rectangle left-top point y-position
   * @param {*} width rectangle width
   * @param {*} height rectangle height
   */
  setSV(x, y, width, height) {
    this.renderer.setScissor(x, y, width, height);
    this.renderer.setViewport(x, y, width, height);
  }

  /**
   * push a display object into graphicsLayer scene
   *
   * @param {THREE.Object3D} child display object, which will be rendering
   * @return {this} this
   */
  add() {
    this.graphicsLayer.add.apply(this.graphicsLayer, arguments);
    return this;
  }

  /**
   * remove a display object from graphicsLayer scene
   *
   * @param {THREE.Object3D} child display object, which you had push it at before
   * @return {this} this
   */
  remove() {
    this.graphicsLayer.remove.apply(this.graphicsLayer, arguments);
    return this;
  }
}

export default XRViewer;
</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 08 2018 14:31:57 GMT+0800 (CST)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
